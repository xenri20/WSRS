@* TODO Add Model later *@

<div id="reports">
    <h2>Reports Chart</h2>
    <canvas id="reportsChart" height="200" width="500"></canvas>
</div>

<script src="/lib/jquery/dist/jquery.min.js"></script>
<script src="/lib/chartjs/dist/chart.umd.js"></script>

<script>
    $(document).ready(function () {
        // Fetch data when the page loads
        $.ajax({
            type: "POST",
            url: "/Reports/GetCollegeReports",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                if (response.error) {
                    console.error(response.error);
                    alert("Error loading chart data.");
                    return;
                }

                // Extract chart labels and data
                var chartLabels = response.labels;
                var chartData = response.violationNumbers;

                // Define chart colors
                var doughnutColors = ["yellow", "violet", "green", "red", "blue", "white", "brown", "black"];

                // Initialize the chart
                new Chart("reportsChart", {
                    type: "doughnut", // Doughnut chart
                    data: {
                        labels: chartLabels,
                        datasets: [{
                            label: "Major Violations by College",
                            backgroundColor: doughnutColors,
                            data: chartData
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: true,
                                position: "top"
                            },
                            title: {
                                display: true,
                                text: "Major Violations by College"
                            }
                        }
                    }
                });
            },
            error: function (xhr, status, error) {
                console.error("Error fetching data:", error);
                alert("Failed to load chart data.");
            }
        });
    });
</script>



<script src="~/js/reports.js"></script>
